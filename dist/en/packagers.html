<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>📦 Packagers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="assets/style.css" />
  <link type="text/css" rel="stylesheet" href="assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="assets/hljs-github.min.css"/>
  <link rel="shortcut icon" href="assets/podium.png" type="image/x-icon">
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="podium" src="assets/podium.png">
      Podium
    </a>
    <div class="links">
      <a href="https://github.schibsted.io/Podium" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav>
      <h3>Podlet</h3>
      <ul>
        <li><a href="podlets_getting_started.html">🚀 Getting Started</a></li>
        <li><a href="podlets_fallbacks.html">🔌 Fallbacks</a></li>
        <li><a href="podlets_proxying.html">🐠 Proxying</a></li>
        <li><a href="podlet_api.html">📚 API</a></li>
      </ul>
      <!--
      <h2>Layouts</h2>
      <h3>📚 Guides</h3>
      <ul>
        <li><a href="layouts_getting_started.html">🚀 Getting Started</a></li>
      </ul>
      <h3>📚 API Docs</h3>
      <ul>
        <li><a href="layout_api.html">Layout</a></li>
        <li><a href="layout_app_api.html">Layout App</a></li>
        <li><a href="layout_app_server_api.html">Layout App Server</a></li>
      </ul>
      -->
    </nav>
    <main><h1 id="📦-packagers"><a class="header-link" href="#📦-packagers"></a>📦 Packagers</h1>
<p>In Parcel, a <code>Packager</code> combines multiple <code>Asset</code>s together into a final output bundle. This happens in the main process after all assets have been processed, and a bundle tree has been created. Packagers are registered based on output file type, and assets that have generated that output type are sent to that packager for production of the final output file.</p>
<h2 id="packager-interface"><a class="header-link" href="#packager-interface"></a>Packager Interface</h2>
<pre class="hljs"><code><span class="hljs-keyword">const</span> {Packager} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parcel-bundler'</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPackager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Packager</span> </span>{
  <span class="hljs-keyword">async</span> start() {
    <span class="hljs-comment">// optional. write file header if needed.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.dest.write(header);
  }

  <span class="hljs-keyword">async</span> addAsset(asset) {
    <span class="hljs-comment">// required. write the asset to the output file.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.dest.write(asset.generated.foo);
  }

  <span class="hljs-keyword">async</span> end() {
    <span class="hljs-comment">// optional. write file trailer if needed.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.dest.end(trailer);
  }
}</code></pre><h2 id="registering-a-packager"><a class="header-link" href="#registering-a-packager"></a>Registering a Packager</h2>
<p>You can register your packager with a bundler using the <code>addPackager</code> method. It accepts a file type to register, and the path to your packager module.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> Bundler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parcel-bundler'</span>);

<span class="hljs-keyword">let</span> bundler = <span class="hljs-keyword">new</span> Bundler(<span class="hljs-string">'input.js'</span>);
bundler.addPackager(<span class="hljs-string">'foo'</span>, <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'./MyPackager'</span>));</code></pre>    </main>
  </div>
  <script>
    (function () {
      var pathname = window.location.pathname.substr(1);
      var activeLink = document.querySelector('a[href="' + pathname + '"]');

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
