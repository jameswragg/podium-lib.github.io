Podlets (page fragments) are standalone http services developed and run in isolation. Podlets can be written in any language, but Podium comes with a @podium/podlet module for easy development of Podlets in node.js.

This is a Podlet serving a html endpoint responding to the locale it get from a Layout:

<div class="tabs"><div class="nav-tabs"><div id="tab-group-26-tab-27" class="nav-link active" data-group="group_26" data-tab="tab-group-26-content-27">Express</div><div id="tab-group-26-tab-28" class="nav-link" data-group="group_26" data-tab="tab-group-26-content-28">Hapi</div><div id="tab-group-26-tab-29" class="nav-link" data-group="group_26" data-tab="tab-group-26-content-29">Fastify</div><div id="tab-group-26-tab-30" class="nav-link" data-group="group_26" data-tab="tab-group-26-content-30">HTTP</div></div><div class="tab-content"><div id="tab-group-26-content-27" class="tab-pane active" data-group="group_26" tabindex="-1"><div><span><pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);<br><span class="hljs-keyword">const</span> Podlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/podlet'</span>);<br><br><span class="hljs-keyword">const</span> app = express();<br><br><span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">'myPodlet'</span>,<br>    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,<br>    <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/'</span>,<br>    <span class="hljs-attr">development</span>: <span class="hljs-literal">true</span>,<br>});<br><br>app.use(podlet.middleware());<br><br>app.get(podlet.content(), (req, res) =&gt; {<br>    <span class="hljs-keyword">if</span> (res.locals.podium.context.locale === <span class="hljs-string">'nb-NO'</span>) {<br>        <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">200</span>).podiumSend(<span class="hljs-string">'&lt;h2&gt;Hei verden&lt;/h2&gt;'</span>);<br>    }<br>    res.status(<span class="hljs-number">200</span>).podiumSend(<span class="hljs-string">`&lt;h2&gt;Hello world&lt;/h2&gt;`</span>);<br>});<br><br>app.get(podlet.manifest(), (req, res) =&gt; {<br>    res.status(<span class="hljs-number">200</span>).json(podlet);<br>});<br><br>app.listen(<span class="hljs-number">7100</span>);<br></code></pre>
</span></div></div><div id="tab-group-26-content-28" class="tab-pane" data-group="group_26" tabindex="-1"><div><span><pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> HapiPodlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/hapi-podlet'</span>);<br><span class="hljs-keyword">const</span> Podlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/podlet'</span>);<br><span class="hljs-keyword">const</span> Hapi = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hapi'</span>);<br><br><span class="hljs-keyword">const</span> app = Hapi.Server({<br>    <span class="hljs-attr">host</span>: <span class="hljs-string">'localhost'</span>,<br>    <span class="hljs-attr">port</span>: <span class="hljs-number">7100</span>,<br>});<br><br><span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">'myPodlet'</span>,<br>    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,<br>    <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/'</span>,<br>    <span class="hljs-attr">development</span>: <span class="hljs-literal">true</span>,<br>});<br><br>app.register({<br>    <span class="hljs-attr">plugin</span>: <span class="hljs-keyword">new</span> HapiPodlet(),<br>    <span class="hljs-attr">options</span>: podlet,<br>});<br><br>app.route({<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,<br>    <span class="hljs-attr">path</span>: podlet.content(),<br>    <span class="hljs-attr">handler</span>: <span class="hljs-function">(<span class="hljs-params">request, h</span>) =&gt;</span> {<br>        <span class="hljs-keyword">if</span> (request.app.podium.context.locale === <span class="hljs-string">'nb-NO'</span>) {<br>            <span class="hljs-keyword">return</span> h.podiumSend(<span class="hljs-string">'&lt;h2&gt;Hei verden&lt;/h2&gt;'</span>);<br>        }<br>        <span class="hljs-keyword">return</span> h.podiumSend(<span class="hljs-string">'&lt;h2&gt;Hello world&lt;/h2&gt;'</span>);<br>    },<br>});<br><br>app.route({<br>    <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,<br>    <span class="hljs-attr">path</span>: podlet.manifest(),<br>    <span class="hljs-attr">handler</span>: <span class="hljs-function">(<span class="hljs-params">request, h</span>) =&gt;</span> <span class="hljs-built_in">JSON</span>.stringify(podlet),<br>});<br><br>app.start();<br></code></pre>
</span></div></div><div id="tab-group-26-content-29" class="tab-pane" data-group="group_26" tabindex="-1"><div><span><pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> fastifyPodlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/fastify-podlet'</span>);<br><span class="hljs-keyword">const</span> fastify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fastify'</span>);<br><span class="hljs-keyword">const</span> Podlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/podlet'</span>);<br><br><span class="hljs-keyword">const</span> app = fastify();<br><br><span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">'myPodlet'</span>,<br>    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,<br>    <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/'</span>,<br>    <span class="hljs-attr">development</span>: <span class="hljs-literal">true</span>,<br>});<br><br>app.register(fastifyPodlet, podlet);<br><br>app.get(podlet.content(), <span class="hljs-keyword">async</span> (request, reply) =&gt; {<br>    <span class="hljs-keyword">if</span> (reply.app.podium.context.locale === <span class="hljs-string">'nb-NO'</span>) {<br>        reply.podiumSend(<span class="hljs-string">'&lt;h2&gt;Hei verden&lt;/h2&gt;'</span>);<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    reply.podiumSend(<span class="hljs-string">'&lt;h2&gt;Hello world&lt;/h2&gt;'</span>);<br>});<br><br>app.get(podlet.manifest(), <span class="hljs-keyword">async</span> (request, reply) =&gt; {<br>    reply.send(podlet);<br>});<br><br><span class="hljs-keyword">const</span> start = <span class="hljs-keyword">async</span> () =&gt; {<br>    <span class="hljs-keyword">try</span> {<br>        <span class="hljs-keyword">await</span> app.listen(<span class="hljs-number">7100</span>);<br>        app.log.info(<span class="hljs-string">`server listening on <span class="hljs-subst">${app.server.address().port}</span>`</span>);<br>    } <span class="hljs-keyword">catch</span> (err) {<br>        app.log.error(err);<br>        process.exit(<span class="hljs-number">1</span>);<br>    }<br>};<br>start();<br></code></pre>
</span></div></div><div id="tab-group-26-content-30" class="tab-pane" data-group="group_26" tabindex="-1"><div><span><pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> { HttpIncoming } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/utils'</span>);<br><span class="hljs-keyword">const</span> Podlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/podlet'</span>);<br><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);<br><br><span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">'myPodlet'</span>,<br>    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,<br>    <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/'</span>,<br>    <span class="hljs-attr">development</span>: <span class="hljs-literal">true</span>,<br>});<br><br><span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-keyword">async</span> (req, res) =&gt; {<br>    <span class="hljs-keyword">let</span> incoming = <span class="hljs-keyword">new</span> HttpIncoming(req, res);<br>    incoming = <span class="hljs-keyword">await</span> podlet.process(incoming);<br><br>    <span class="hljs-keyword">if</span> (incoming.url.pathname === podlet.manifest()) {<br>        res.statusCode = <span class="hljs-number">200</span>;<br>        res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>);<br>        res.setHeader(<span class="hljs-string">'podlet-version'</span>, podlet.version);<br>        res.end(<span class="hljs-built_in">JSON</span>.stringify(podlet));<br>        <span class="hljs-keyword">return</span>;<br>    }<br><br>    <span class="hljs-keyword">if</span> (incoming.url.pathname === podlet.content()) {<br>        res.statusCode = <span class="hljs-number">200</span>;<br>        res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/html'</span>);<br>        res.setHeader(<span class="hljs-string">'podlet-version'</span>, podlet.version);<br><br>        <span class="hljs-keyword">if</span> (incoming.context.locale === <span class="hljs-string">'nb-NO'</span>) {<br>            res.end(podlet.render(incoming, <span class="hljs-string">'&lt;h2&gt;Hei verden&lt;/h2&gt;'</span>));<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        res.end(podlet.render(incoming, <span class="hljs-string">'&lt;h2&gt;Hello world&lt;/h2&gt;'</span>));<br>        <span class="hljs-keyword">return</span>;<br>    }<br><br>    res.statusCode = <span class="hljs-number">404</span>;<br>    res.setHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/plain'</span>);<br>    res.end(<span class="hljs-string">'Not found'</span>);<br>});<br><br>server.listen(<span class="hljs-number">7100</span>);<br></code></pre>
</span></div></div></div></div>

Start the Podlet and it will be accessable on http://localhost:7100/