<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <title>Podium - 🐠 Passing URL params and query string values to podlets</title>
  <link type="text/css" rel="stylesheet" href="/docs/assets/style.css" />
  <link type="text/css" rel="stylesheet" href="/docs/assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="/docs/assets/hljs-github.min.css"/>
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css"/>
  <link rel="shortcut icon" href="/docs/assets/favicons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/docs/assets/favicons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/docs/assets/favicons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/docs/assets/favicons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/docs/assets/favicons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/docs/assets/favicons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/docs/assets/favicons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/docs/assets/favicons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/docs/assets/favicons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/docs/assets/favicons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/docs/assets/favicons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/docs/assets/favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/docs/assets/favicons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/docs/assets/favicons/favicon-16x16.png">
  <link rel="manifest" href="/docs/assets/favicons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/docs/assets/favicons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="podium" src="/docs/assets/podium.png" alt="Podium logo illustrates a group of podlets as circles">
      Podium
    </a>
    <div class="links">
      <a href="https://github.com/podium-lib/issues/issues">Issues</a>
      <a href="https://github.com/podium-lib" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav class="main-navigation">

      <h3>Podium</h3>
      <ul>
        <li><a href="/docs/podium/conceptual_overview.html">📚 Overview</a></li>
      </ul>

      <h3>Podlet Guides</h3>
      <ul>
        <li><a href="/docs/podlets/getting_started.html">🚀 Getting Started</a></li>
        <li><a href="/docs/podlets/fallbacks.html">🔌 Fallbacks</a></li>
        <li><a href="/docs/podlets/context.html">✂️ Context</a></li>
        <li><a href="/docs/podlets/proxying.html">🐠 Proxying</a></li>
        <li><a href="/docs/podlets/local_development.html">🔥 Development</a></li>
      </ul>

      <h3>Layout Guides</h3>
      <ul>
        <li><a href="/docs/layouts/getting_started.html">🚀 Getting Started</a></li>
        <li><a href="/docs/layouts/context.html">✂️ Context</a></li>
        <li><a href="/docs/layouts/unavailable_podlets.html">🔌 Unavailable Podlets</a></li>
        <li><a href="/docs/layouts/dynamic_routes.html">🐠 Dynamic Routes</a></li>
        <li><a href="/docs/layouts/assets.html">📦 Assets</a></li>
        <li><a href="/docs/layouts/local_development.html">🔥 Development</a></li>
      </ul>

      <h3>API Docs</h3>
      <ul>
        <li><a href="https://github.com/podium-lib/podlet/blob/master/README.md">📚 Podlet</a></li>
        <li><a href="https://github.com/podium-lib/layout/blob/master/README.md">📚 Layout</a></li>
        <li><a href="https://github.com/podium-lib/context/blob/master/README.md">📚 Context</a></li>
        <li><a href="https://github.com/podium-lib/proxy/blob/master/README.md">📚 Proxy</a></li>
        <li><a href="https://github.com/podium-lib/client/blob/master/README.md">📚 Client</a></li>
      </ul>
    </nav>
    <main class="markdown-body"><h1 id="🐠-passing-url-params-and-query-string-values-to-podlets"><a class="header-link" href="#🐠-passing-url-params-and-query-string-values-to-podlets"></a>🐠 Passing URL params and query string values to podlets</h1>
<p>There are occasions where you will want user interaction in a podlet to inform the behavior of other podlets. A great example of this is search. You might have one podlet that handles user search input and another podlet that displays search results.</p>
<p><em>Example</em></p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> searchField = layout.client.register({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'searchField'</span>,
    <span class="hljs-attr">uri</span>: <span class="hljs-string">'http://localhost:7200'</span>,
});

<span class="hljs-keyword">const</span> searchResults = layout.client.register({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'searchResults'</span>,
    <span class="hljs-attr">uri</span>: <span class="hljs-string">'http://localhost:7201'</span>,
});</code></pre><p>The recommended way for the <code>searchResults</code> podlet to react to user changes in the <code>searchField</code> is to manipulate the pages URL query string parameters or pathname param.</p>
<h2 id="sending-query-params"><a class="header-link" href="#sending-query-params"></a>Sending query params</h2>
<p>The Podium context is not the only way for a layout to communicate with its podlets. Query params can be forwarded to podlets via <code>.fetch()</code> calls.</p>
<p><em>Example</em></p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> content = podlet.fetch(context, { <span class="hljs-attr">query</span>: { <span class="hljs-attr">search</span>: req.query.search } });</code></pre><p>Continuing with our search example, when a request comes in to the layout at <code>http://localhost:7101?search=houses</code>, we forward the query parameter <code>search</code> on to both podlets.</p>
<p><em>Example</em></p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-built_in">Promise</span>.all([
    searchField.fetch(ctx, { <span class="hljs-attr">query</span>: { <span class="hljs-attr">search</span>: req.query.search } }),
    searchResults.fetch(ctx, { <span class="hljs-attr">query</span>: { <span class="hljs-attr">search</span>: req.query.search } }),
]);</code></pre><p>Our podlets will then have access to the value of <code>search</code> and be able to render content accordingly. Likewise, in order to trigger changes, all a podlet will need to do is navigate the page to <code>http://localhost:7101?search=houses</code>.
The <code>searchField</code> podlet could do this by creating a form.</p>
<p><em>Example</em></p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"http://localhost:7101"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"GET"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"search"</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></code></pre><h2 id="sending-a-pathname"><a class="header-link" href="#sending-a-pathname"></a>Sending a pathname</h2>
<p>Another way to send dynamic queries to podlets is by sending along a <code>pathname</code> option. This can be used, for example, to build podlet URLs that are defined using named route parameters.</p>
<p><em>Example: sending podlet content route with named parameter</em></p>
<p>In the layout.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> content = podlet.fetch(context, { <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/andrew'</span> });</code></pre><p>In the podlet.</p>
<pre class="hljs"><code>app.get(<span class="hljs-string">'/:name'</span>, (req, res) =&gt; {
    <span class="hljs-comment">// req.params.name =&gt; andrew</span>
});</code></pre><p>It is important to note here that the <code>pathname</code> value is appended to the content route so if you were to serve your content route at <code>/content</code> instead of at <code>/</code> the final URL sent to the podlet would include this.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({
    <span class="hljs-attr">content</span>: <span class="hljs-string">'/content'</span>,
});
app.get(<span class="hljs-string">'/content/:name'</span>, (req, res) =&gt; {
    <span class="hljs-comment">// req.params.name =&gt; andrew</span>
});</code></pre><p>You are, in fact, free to handle any routes you like under <code>content</code> namespace. The following is also valid.</p>
<pre class="hljs"><code><span class="hljs-comment">// include `/name` when defining `pathname`</span>
<span class="hljs-keyword">const</span> content = podlet.fetch(context, { <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/name/andrew'</span> });

<span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({
    <span class="hljs-attr">content</span>: <span class="hljs-string">'/content'</span>,
});
app.get(<span class="hljs-string">'/content/name/:name'</span>, (req, res) =&gt; {
    <span class="hljs-comment">// req.params.name =&gt; andrew</span>
});</code></pre><h2 id="next-steps"><a class="header-link" href="#next-steps"></a>Next steps</h2>
<ul class="list">
<li><a href="/docs/layouts/assets.html">learn about options for including client side assets</a></li>
<li><a href="/docs/layouts/local_development.html">read about setting up a layout development workflow</a></li>
</ul>
    </main>
  </div>
  <script>
    (function () {
      var pathname = window.location.pathname.substr(1);
      var activeLink = document.querySelector('a[href$="' + pathname + '"]');

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
