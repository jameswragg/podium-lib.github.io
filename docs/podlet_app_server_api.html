<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>📚 API</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="/Podium/docs/assets/style.css" />
  <link type="text/css" rel="stylesheet" href="/Podium/docs/assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="/Podium/docs/assets/hljs-github.min.css"/>
  <link rel="shortcut icon" href="/Podium/docs/assets/podium.png" type="image/x-icon">
</head>
<body>
  <header>
    <a class="logo" href="/Podium">
      <img class="podium" src="/Podium/docs/assets/podium.png">
      Podium
    </a>
    <div class="links">
      <a href="https://github.schibsted.io/Podium" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav>
    <h3>Podium</h3>
      <ul>
        <li><a href="/Podium/docs/podium/conceptual_overview.html">📚 Conceptual Overview</a></li>
      </ul>
      <h3>Podlet</h3>
      <ul>
        <li><a href="/Podium/docs/podlets/getting_started.html">🚀 Getting Started</a></li>
        <li><a href="/Podium/docs/podlets/fallbacks.html">🔌 Fallbacks</a></li>
        <li><a href="/Podium/docs/podlets/proxying.html">🐠 Proxying</a></li>
        <li><a href="/Podium/docs/podlets/context.html">✂️ Context</a></li>
        <li><a href="/Podium/docs/podlets/assets.html">📦 Assets</a></li>
        <li><a href="/Podium/docs/podlets/local_development.html">🔥 Local Development</a></li>
        <li><a href="/Podium/docs/podlets/api.html">🚨 API</a></li>
      </ul>
      <!--
      <h2>Layouts</h2>
      <h3>📚 Guides</h3>
      <ul>
        <li><a href="layouts_getting_started.html">🚀 Getting Started</a></li>
      </ul>
      <h3>📚 API Docs</h3>
      <ul>
        <li><a href="layout_api.html">Layout</a></li>
        <li><a href="layout_app_api.html">Layout App</a></li>
        <li><a href="layout_app_server_api.html">Layout App Server</a></li>
      </ul>
      -->
    </nav>
    <main><h1 id="📚-api"><a class="header-link" href="#📚-api"></a>📚 API</h1>
<h2 id="constructor"><a class="header-link" href="#constructor"></a>Constructor</h2>
<pre class="hljs"><code><span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet(options);</code></pre><h3 id="options"><a class="header-link" href="#options"></a>options</h3>
<table>
<thead>
<tr>
<th>option</th>
<th>default</th>
<th>type</th>
<th>required</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td><code>null</code></td>
<td><code>string</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>version</td>
<td><code>null</code></td>
<td><code>string</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td>logger</td>
<td><code>console</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>assetServerUrl</td>
<td><code>null</code></td>
<td><code>string</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td>assets</td>
<td><code>null</code></td>
<td><code>object</code></td>
<td><code>false</code></td>
</tr>
</tbody>
</table>
<h4 id="name"><a class="header-link" href="#name"></a>name</h4>
<p>Name that the podlet identifies itself by. When assets are published, this name
value will be used to identify published assets on the asset server. The name
value must be in camelCase</p>
<p>Example</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">name</span>: <span class="hljs-string">"myPodletName"</span>;
}</code></pre><h4 id="version"><a class="header-link" href="#version"></a>version</h4>
<p>Current version of the podlet, it is important that this value be updated when a
new version of the podlet is deployed as the page (layout) that the podlet is
displayed in uses this value to know whether to refresh the podlet or not. It is
currently safest to include a timestamp in the version value to ensure that it
updates.</p>
<p>Example</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">version</span>: <span class="hljs-string">"1.0.0-"</span> + <span class="hljs-built_in">Date</span>.now().toString();
}</code></pre><h4 id="logger"><a class="header-link" href="#logger"></a>logger</h4>
<p>Any log4j compatible logger can be passed in and will be used logging. By
default logs go to console which is shimmed out to be log4j compatible.</p>
<p>Example</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">logger</span>: <span class="hljs-built_in">console</span>;
}</code></pre><h4 id="assetserverurl"><a class="header-link" href="#assetserverurl"></a>assetServerUrl</h4>
<p>If asset bundling is required, the url to the asset server must be provided.
This is the full url to the base of the asset server. Eg. <a href="http://localhost:3001">http://localhost:3001</a></p>
<p>Example</p>
<pre class="hljs"><code>{
  <span class="hljs-attr">assetServerUrl</span>: <span class="hljs-string">"http://localhost:3001"</span>;
}</code></pre><h4 id="assets"><a class="header-link" href="#assets"></a>assets</h4>
<p>This object is used to configure client side javascript and css asset file
locations. It must be defined as an object with keys <code>js</code> and <code>css</code>. If not
provided, calling <code>.publish()</code> will be a noop. Eg.</p>
<p>Example</p>
<pre class="hljs"><code>{
    <span class="hljs-attr">js</span>: <span class="hljs-string">'/full/path/to/scripts.js'</span>,
    <span class="hljs-attr">css</span>: <span class="hljs-string">'/full/path/to/styles.css'</span>,
}</code></pre><p>Usually, you will want to specify the location of assets relative to the current
file which you can do like so:</p>
<p>Example</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);</code></pre><pre class="hljs"><code>{
    <span class="hljs-attr">js</span>: path.resolve(__dirname, <span class="hljs-string">'../assets/scripts.js'</span>),
    <span class="hljs-attr">css</span>: path.resolve(__dirname, <span class="hljs-string">'../assets/styles.css'</span>),
}</code></pre><h2 id="connect-middleware"><a class="header-link" href="#connect-middleware"></a>Connect middleware</h2>
<p>When creating a podlet, podium needs access to each request/response which it
does using middleware. Any framework that supports the connect middleware
pattern should work though only express is currently supported. Mount the
middleware before defining any routes.</p>
<p>Example</p>
<pre class="hljs"><code>podlet.middleware();</code></pre><h2 id="podlet-manifest"><a class="header-link" href="#podlet-manifest"></a>Podlet manifest</h2>
<p>This method returns the value of path and internally keeps track of the value of
path for use when the podlet instance is serialized into manifest content.</p>
<p>Examples</p>
<pre class="hljs"><code>podlet.manifest();
<span class="hljs-comment">// path = /manifest.json</span>

podlet.manifest(<span class="hljs-string">"/"</span>);
<span class="hljs-comment">// path = /</span>

podlet.manifest(<span class="hljs-string">"/manifest"</span>);
<span class="hljs-comment">// path = /manifest</span></code></pre><p>After calling <code>podlet.content(path)</code> and <code>podlet.fallback(path)</code>, when you
serialize the podlet instance you will see the value of <code>path</code> set to the value
for the keys <code>content</code> and <code>fallback</code>.</p>
<p>Example</p>
<pre class="hljs"><code><span class="hljs-built_in">JSON</span>.stringify(podlet);

<span class="hljs-comment">// {"name":"myPodlet","version":"1.0.0","content":"/","fallback":"/fallback","assets":{"js":"","css":""},"proxy":{}}</span></code></pre><h2 id="content-route"><a class="header-link" href="#content-route"></a>Content route</h2>
<p>This method returns the value of path and internally keeps track of the value of
path for use when the podlet instance is serialized into manifest content.</p>
<p>Example</p>
<pre class="hljs"><code>podlet.content();
<span class="hljs-comment">// path = /</span>

podlet.content(<span class="hljs-string">"/"</span>);
<span class="hljs-comment">// path = /</span>

podlet.content(<span class="hljs-string">"/content"</span>);
<span class="hljs-comment">// path = /content</span></code></pre><h2 id="fallback-route"><a class="header-link" href="#fallback-route"></a>Fallback route</h2>
<p>This method returns the value of path and internally keeps track of the value of
path for use when the podlet instance is serialized into manifest content.</p>
<p>Example</p>
<pre class="hljs"><code>podlet.fallback();
<span class="hljs-comment">// path = /fallback</span>

podlet.fallback(<span class="hljs-string">"/"</span>);
<span class="hljs-comment">// path = /</span>

podlet.fallback(<span class="hljs-string">"/fallback"</span>);
<span class="hljs-comment">// path = /fallback</span></code></pre><h2 id="publishing-assets"><a class="header-link" href="#publishing-assets"></a>Publishing assets</h2>
<p>This method publishes podlet client side assets to an asset server. If either or
both of the <code>assets</code> or <code>assetServerUrl</code> options are not defined then
<code>.publish()</code> will be a noop. If <code>.publish()</code> has already been called it will
also be a noop unless the boolean option <code>force</code> is passed. Returns a promise.</p>
<p>Example</p>
<p>Publish the podlets assets</p>
<pre class="hljs"><code><span class="hljs-keyword">await</span> podlet.publish();</code></pre><p>Example</p>
<p>Force the podlet to republish</p>
<pre class="hljs"><code><span class="hljs-keyword">await</span> podlet.publish(<span class="hljs-literal">true</span>);</code></pre>    </main>
  </div>
  <script>
    (function () {
      var pathname = window.location.pathname.substr(1);
      var activeLink = document.querySelector('a[href="' + pathname + '"]');

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
