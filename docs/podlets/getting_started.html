<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>🚀 Getting Started</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="/docs/assets/style.css" />
  <link type="text/css" rel="stylesheet" href="/docs/assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="/docs/assets/hljs-github.min.css"/>
  <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css"/>
  <link rel="shortcut icon" href="/docs/assets/podium.png" type="image/x-icon">
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="podium" src="/docs/assets/podium.png">
      Podium
    </a>
    <div class="links">
      <a href="https://github.com/podium-lib" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav class="main-navigation">
      
      <h3>Podium</h3>
      <ul>
        <li><a href="/docs/podium/conceptual_overview.html">📚 Overview</a></li>
      </ul>
      
      <h3>Podlet Guides</h3>
      <ul>
        <li><a href="/docs/podlets/getting_started.html">🚀 Getting Started</a></li>
        <li><a href="/docs/podlets/fallbacks.html">🔌 Fallbacks</a></li>
        <li><a href="/docs/podlets/context.html">✂️ Context</a></li>
        <li><a href="/docs/podlets/proxying.html">🐠 Proxying</a></li>
        <li><a href="/docs/podlets/local_development.html">🔥 Development</a></li>
      </ul>

      <h3>Layout Guides</h3>
      <ul>
        <li><a href="/docs/layouts/getting_started.html">🚀 Getting Started</a></li>
        <li><a href="/docs/layouts/context.html">✂️ Context</a></li>
        <li><a href="/docs/layouts/unavailable_podlets.html">🔌 Unavailable Podlets</a></li>
        <li><a href="/docs/layouts/dynamic_routes.html">🐠 Dynamic Routes</a></li>
        <li><a href="/docs/layouts/assets.html">📦 Assets</a></li>
        <li><a href="/docs/layouts/local_development.html">🔥 Development</a></li>
      </ul>

      <h3>API Docs</h3>
      <ul>
        <li><a href="https://github.com/podium-lib/podlet/blob/master/README.md">📚 Podlet</a></li>
        <li><a href="https://github.com/podium-lib/layout/blob/master/README.md">📚 Layout</a></li>
        <li><a href="https://github.com/podium-lib/context/blob/master/README.md">📚 Context</a></li>
        <li><a href="https://github.com/podium-lib/proxy/blob/master/README.md">📚 Proxy</a></li>
        <li><a href="https://github.com/podium-lib/client/blob/master/README.md">📚 Client</a></li>
      </ul>
    </nav>
    <main class="markdown-body"><h1 id="🚀-getting-started"><a class="header-link" href="#🚀-getting-started"></a>🚀 Getting Started</h1>
<p>👉 This documentation is for Podium podlets version 3.0. <a href="/docs/podlets/v2/getting_started.html">Version 2.0 documentation</a> is also available.</p>
<p>This guide will show you how to get started building podlets for Podium in Node
js using the express js http framework. It will walk you through the creation of
a very simple bare bones podlet.</p>
<h2 id="before-you-begin"><a class="header-link" href="#before-you-begin"></a>Before you begin</h2>
<p>Ideally, you should have some familiarity with building apps with javascript and
node.js. You will also need to have node.js installed at version 8 or higher.
The npm cli will be installed automatically when you install
node.js</p>
<h2 id="step-1:-project-setup"><a class="header-link" href="#step-1:-project-setup"></a>Step 1: Project setup</h2>
<p>First, we need to initialize a new node project in an empty directory.</p>
<pre class="hljs"><code>mkdir basic-podlet
<span class="hljs-built_in">cd</span> basic-podlet
npm init</code></pre><p>Follow the prompts (mostly accepting defaults) to complete project
initialization.</p>
<h2 id="step-2:-install-dependencies"><a class="header-link" href="#step-2:-install-dependencies"></a>Step 2: Install dependencies</h2>
<p>Next, we need to install and import dependencies. Express js and
@podium/podlet. To do so, run:</p>
<pre class="hljs"><code>npm install express @podium/podlet@alpha</code></pre><h2 id="step-3:-import-dependencies"><a class="header-link" href="#step-3:-import-dependencies"></a>Step 3: Import dependencies</h2>
<p>Create a file <code>index.js</code> and import the 2 dependencies at the top</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> Podlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/podlet'</span>);</code></pre><h2 id="step-4:-instantiate-instances"><a class="header-link" href="#step-4:-instantiate-instances"></a>Step 4: Instantiate instances</h2>
<p>Create an express app instance and instantiate the podlet</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> app = express();

<span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myPodlet'</span>, <span class="hljs-comment">// required</span>
    version: <span class="hljs-string">'1.0.0'</span>, <span class="hljs-comment">// required</span>
    pathname: <span class="hljs-string">'/'</span>, <span class="hljs-comment">// required</span>
    manifest: <span class="hljs-string">'/manifest.json'</span>, <span class="hljs-comment">// optional, defaults to '/manifest.json'</span>
    content: <span class="hljs-string">'/'</span>, <span class="hljs-comment">// optional, defaults to '/'</span>
    development: <span class="hljs-literal">true</span>, <span class="hljs-comment">// optional, defaults to false</span>
});</code></pre><p>It&#39;s not necessary to set <code>content</code> or <code>manifest</code> as we have done above. These values default to appropriate values that you will use most of the time.</p>
<p>While we have set <code>development</code> to <code>true</code>, it&#39;s important to remember to set this to <code>false</code> when working with layouts. Development mode is only useful when working on a podlet in isolation.</p>
<h2 id="step-5:-mount-middleware"><a class="header-link" href="#step-5:-mount-middleware"></a>Step 5: Mount middleware</h2>
<p>Mount the podlet instances <a href="https://medium.com/@agoiabeladeyemi/a-simple-explanation-of-express-middleware-c68ea839f498">middleware</a> into the express app</p>
<pre class="hljs"><code>app.use(podlet.middleware());</code></pre><h2 id="step-6:-create-a-content-route"><a class="header-link" href="#step-6:-create-a-content-route"></a>Step 6: Create a content route</h2>
<p>This is the route that the podlet server will use to return its HTML content.</p>
<pre class="hljs"><code>app.get(podlet.content(), (req, res) =&gt; {
    res.status(<span class="hljs-number">200</span>).podiumSend(<span class="hljs-string">`
        &lt;div&gt;
            This is the podlet's HTML content
        &lt;/div&gt;
    `</span>);
});</code></pre><p>Here we use the podlets helper method <code>podlet.content()</code> which returns the content path we set in step 4.</p>
<h2 id="step-7:-create-a-manifest-route"><a class="header-link" href="#step-7:-create-a-manifest-route"></a>Step 7: Create a manifest route</h2>
<p>In Podium, each podlet must return meta data about itself in the form of a JSON document. By returning the podlet object, it will be serialized with <code>JSON.stringify(podlet)</code> and
returned to the router.</p>
<pre class="hljs"><code>app.get(podlet.manifest(), (req, res) =&gt; {
    res.status(<span class="hljs-number">200</span>).send(podlet);
});</code></pre><p>Same as with the content route, we can use the podlet&#39;s helper method <code>podlet.manifest()</code> to return the default manifest route, which is <code>&#39;/manifest.json&#39;</code></p>
<h2 id="step-8:-start-the-server"><a class="header-link" href="#step-8:-start-the-server"></a>Step 8: Start the server</h2>
<p>Now, all thats left is to start the server and test it out</p>
<pre class="hljs"><code>app.listen(<span class="hljs-number">7100</span>);</code></pre><p>We call <code>.listen(port)</code> on the express app instance and pass it a port</p>
<p>We can run the app with:</p>
<pre class="hljs"><code>node index.js</code></pre><p>And we can then CURL the server to get back it&#39;s manifest content:</p>
<pre class="hljs"><code>curl http://localhost:7100/manifest.json
<span class="hljs-comment"># {"name":"myPodlet","version":"1.0.0","content":"/","fallback":"/fallback","assets":{"js":"","css":""},"proxy":{}}</span></code></pre><p>And CURL the server to get back it&#39;s HTML content:</p>
<pre class="hljs"><code>curl http://localhost:7100
<span class="hljs-comment"># &lt;div&gt;This is the podlet's HTML content&lt;/div&gt;</span></code></pre><h2 id="the-complete-code"><a class="header-link" href="#the-complete-code"></a>The complete code</h2>
<pre class="hljs"><code><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> Podlet = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@podium/podlet'</span>);

<span class="hljs-keyword">const</span> app = express();

<span class="hljs-keyword">const</span> podlet = <span class="hljs-keyword">new</span> Podlet({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'myPodlet'</span>,
    <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,
    <span class="hljs-attr">pathname</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-string">'/'</span>,
    <span class="hljs-attr">fallback</span>: <span class="hljs-string">'/fallback'</span>,
    <span class="hljs-attr">development</span>: <span class="hljs-literal">true</span>,
});

app.use(podlet.middleware());

app.get(podlet.content(), (req, res) =&gt; {
    res.status(<span class="hljs-number">200</span>).podiumSend(<span class="hljs-string">`
        &lt;div&gt;
            This is the podlet's HTML content
        &lt;/div&gt;
    `</span>);
});

app.get(podlet.manifest(), (req, res) =&gt; {
    res.status(<span class="hljs-number">200</span>).send(podlet);
});

app.listen(<span class="hljs-number">7100</span>);</code></pre><h2 id="next-steps"><a class="header-link" href="#next-steps"></a>Next steps</h2>
<ul class="list">
<li><a href="/docs/podlets/fallbacks.html">add a fallback route to your podlet</a></li>
<li><a href="/docs/podlets/context.html">learn about working with the context</a></li>
<li><a href="/docs/podlets/proxying.html">learn about adding additional routes using the proxy</a></li>
<li><a href="/docs/podlets/local_development.html">read about improving your podlet development workflow</a></li>
</ul>
    </main>
  </div>
  <script>
    (function () {
      var pathname = window.location.pathname.substr(1);
      var activeLink = document.querySelector('a[href$="' + pathname + '"]');

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
